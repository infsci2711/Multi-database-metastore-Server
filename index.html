<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Multidbs-metastore-server by infsci2711</title>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Multidbs-metastore-server</h1>
        <p class="header">Multi-database metastore Server</p>
	<p>
	</p>
        <ul>
          <li class="download"><a class="buttons" href="https://github.com/infsci2711/MultiDBs-MetaStore-Server/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/infsci2711/MultiDBs-MetaStore-Server/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/infsci2711/MultiDBs-MetaStore-Server">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/infsci2711">infsci2711</a></p>


      </header>
      <section>
        <h1>
<a id="multi-database-metastore-server" class="anchor" href="#multi-database-metastore-server" aria-hidden="true"><span class="octicon octicon-link"></span></a>Multi-database-metastore-Server</h1>

<h3>Description</h3>

<p>The goal of this project is to keep information (source description in terms of virtual data integration approach) about the available data stores.

The information should include all useful aspects, e.g. url, port, username, password, database name, what protocol to use to connect, what connection format is, any other information about the datastore. The information should be collected in two ways:</p>
<p>1. Ask user to input whatever they can/need to input.</p>

<p>2. User info that user input (e.g. connection info), you need to connect to the data store and collect more metadata. E.g. table names, their schemas, some data statistics, e.g. how much data there is, etc.</p>
<h3>Project Setup </h3>
<p>
1. login to the server
If you have mac or you have some linux OS (e.g. Ubuntu) then you would need to use terminal to connect to the server. Simply open the terminal and type:<br>
<code class="language-xml" data-lang="xml">ssh YOURUSERNAME@IP</code><br>
where YOURUSERNAME is your user name that you recieve in email and the IP is the IP address of the server.<br>
Then enter your password (note no characters will be printed while you are entering your password) and you should be logged into the server.<br>
</p><p>
2. Install the essentials:<br>
<code class="language-xml" data-lang="xml">sudo apt-get install maven<br>
sudo apt-get install git<br>
sudo apt-get install openjdk-7-jdk<br>
sudo apt-get install mysql-server<br>
sudo apt-get install nginx<br></code>
</p><p>
3. Create folders:<br>
<code class="language-xml" data-lang="xml">cd /opt<br>
sudo mkdir project<br>
cd project<br></code>
</p><p>
4. Clone projects from Github<br>
<code class="language-xml" data-lang="xml">
sudo git clone https://github.com/infsci2711/MultiDBs-Utils.git<br>
sudo git clone https://github.com/infsci2711/MultiDBs-MetaStore-Server<br>
sudo git clone https://github.com/infsci2711/MultiDBs-MetaStore-WebClient<br></code>

</p><p>
5. Create symlink to the client code in the project folder<br>
<code class="language-xml" data-lang="xml">
cd /usr/share/nginx <br>
sudo rm -R html <br>
sudo ln -sv /opt/project/MultiDBs-MetaStore-WebClient html<br></code>
</p><p>
6. Setup database<br>
Run the startup.sh file under “MultiDBs-MetaStore-Server” directory<br>
The startup.sh should contain the following codes:<br>
<code class="language-xml" data-lang="xml">#!/bin/bash<br>
mysql -u [username] –p[password] < metastoredb.sql<br></code>

Replace [username] and [password] with your own username and password of your MySQL database, then do <br>
<code class="language-xml" data-lang="xml">sh startup.sh<br></code>
in terminal<br>
</p><p>
7.  build the project by maven install<br>
To build the project, run mvn instal like this:<br>
<code class="language-xml" data-lang="xml">cd MultiDBs-Utils <br>
mvn install<br>
cd MultiDBs-MetaStore-Server <br>
mvn install<br></code>
</p><p>
8. Start the server:<br>
<code class="language-xml" data-lang="xml">cd /opt/project/MultiDBs-MetaStore-Server/MultiDBsMetaStoreServerAPI/target<br>
nohup java -jar multidbsmetastoreserverapi-0.1-SNAPSHOT.jar > log.out 2> error.log < /dev/null &	<br></code>



</p>
<h3>REST service instruction</h3>

<p>1) To show all datasources ids with dbNames, the API is: <br>Method: GET <br>http://54.152.26.131:7654/datasources/ids

<br>and the result should be the JSON array: [{id:..., dbName:""},...]</p>

<p>2) To get all tables names for a given datasource API is as: <br>Method: GET <br>http://54.152.26.131:7654/datasources/{id}/tables<br>

the {id} is the parameter that is for given id of the datasource, you return the list of table names ["", "", ...]</p>

<p>3) Get list of columns for given datasource id and table name, the API is: <br>Method: GET <br>http://54.152.26.131:7654/datasources/{id}/{tableName}/columns

the {id} and {tableName} are the parameters the result should be JSON array of column names ["", "", ...]</p>

<p>4) Get just one datasource info by datasource id. The API is as: <br>Method: GET <br>http://54.152.26.131:7654/datasources/{id}<br>

{id} is the parameter<br>

JSON: { "id": 1, "IPAddress": "ip1", "port": 123, "DBname": "dbName1", "username": "username1", "password": "password1", "DBtype": "MySQL", "tables": [ { "tableName" : "test", "columns": [ { "columnName": "field" } ] } ] }</p>

<p>5) To register a new datasource the API is: <br>Method: PUT <br>http://54.152.26.131:7654/datasources/add

<br>JSON: { "IPAddress": "ip1", "port": 123, "DBname": "dbName1", "username": "username1", "password": "password1", "DBtype": "MySQL"}</p>

<p>6) Get all datasources info. The API is as: <br>Method: GET <br>http://54.152.26.131:7654/datasources
</p>

      </section> 
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>
